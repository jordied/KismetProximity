# WiFi Proximity Scanner
These are a few python files which allow a [Raspberry Pi](https://www.raspberrypi.org) to scan it's surroundings for active Wi-Fi Devices. It should work fine on any Linux device however (untested). Kismet does not work on Macs running *Mavericks or newer*

# About
This repository contains athe work undertaken by myslef for my thesis project at the University of Queensland in 2015. The problem was: 

"Based on the mobile device activity, can the size of a crowd be estimates"

I developed two parts, firstly a Wi-Fi scanner which runs on a Raspberry Pi and scans for active Wi-Fi devices. Secondly, a receiver which logs and graphs the data.

The code here is not thoroughly tested and I make no guarentee about how it would work when deployed.

I gathered data about crowds and mobile devices at a cafe (found in `/data`). I then used Weka to develop decision trees and investigate the relationships between variables. 

## Requirements
#### 1. [Kismet](http://kismetwireless.net) 

This must be installed on your Raspberry Pi  or linux device for it to run. **I recomend downloading, compiling and installing yourself from source.** I noticed 
`sudo apt-get kismet` would sometimes install the 2008 version which may not work.

#### 2. [Paho MQTT](https://pypi.python.org/pypi/paho-mqtt)

This can be installed using `sudo pip install paho-mqtt`

#### 3. [Dictionary to XML](https://pypi.python.org/pypi/dicttoxml)

This can be installed using `sudo pip install dicttoxml`
#### 4. [lxml](http://lxml.de)

This can be installed using `sudo pip install lxml`

#### 5. [Numpy](http://www.numpy.org)

This can be installed using `sudo pip install scipy`

#### 6. [NetAddr](https://pythonhosted.org/netaddr/installation.html)

This can be installed using `sudo pip install netaddr`


## Usage
### scanner/wifiScanner.py
Requires a folder `./logs`

	usage: wifiScanner.py [-h] [--scan [sec]] [--wait [sec]] [--id [N]]
	                      [--host [url]] [--logfile [filename]] [--loglevel [N]]
	                      [--findDevice [N]]
	
	Using a Raspberry Pi, scan the nearby environemnt for active WiFi devices and
	post on MQTT
	
	optional arguments:
	  -h, --help            show this help message and exit
	  --scan [sec]          Scan duration in seconds (default of 3).
	  --wait [sec]          Wait duration in seconds (default of 1).
	  --id [N]              ID of scanner (default of 1).
	  --host [url]          UQL of MQTT server (default is CEIT winter).
	  --logfile [filename]  Save the logfile generated by this program
	  --loglevel [N]        Log level as 0, 10 , 20, 30, 40

### model/receiver.py
Requires a folder `./logs`

	usage: reciever.py [-h] [--topic [base/sub]] [--host [url]] [--graph]
	                   [--timeout [sec]] [--rssi [db]] [--freq [Hz]]
	                   [--logfile [filename]] [--loglevel [N]] [--init [N]]
	
	This is to be used in conjunction with the WifiScanner on a Raspberry Pi
	
	optional arguments:
	  -h, --help            show this help message and exit
	  --topic [base/sub]    Full topic to listen to. (Example "proximity/sensor")
	  --host [url]          UQL of MQTT server (default is CEIT winter).
	  --graph               Do not graph the data.
	  --timeout [sec]       How long the device will be remembered
	  --rssi [db]           RSSI Cutoff Value
	  --freq [Hz]           Frequency of graph updating, default 2Hz
	  --logfile [filename]  Save the logfile generated by this program
	  --loglevel [N]        Log level as 0, 10 , 20, 30, 40 or 50
	  --init [N]            Initial number of people.
	  
### model/transpose.py
Flip the rows and columns of a csv.

`python transpose.py [filename]`
### model/manlookup
Lookup the OUI of a MAC Address. (Works with AA:BB:CC:DD:EE:FF format)

`python transpose.py [MAC]`